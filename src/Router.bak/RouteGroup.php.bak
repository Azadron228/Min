php

namespace Min\Router;

use Min\Router\Route;

class RouteGroup
{
    private string $prefix;
    private array $routes = [];
    private array $middleware = [];

    /**
     * @param string $prefix
     */
    public function __construct(string $prefix, array $parentMiddleware = [])
    {
        $this->prefix = $prefix;
        $this->middleware = $parentMiddleware;
    }

    public function middleware(Closure $middleware): void
    {
        $this->middleware[] = $middleware;
    }

    public function getMiddleware(): array
    {
        return $this->middleware;
    }

    /**
     * @param string $path
     * @param string|array|Closure $callable
     */
    public function get(string $path, string|array|Closure $callable): void
    {
        $this->routes[] = new Route(
            path: $this->prefix . $path,
            callable: $callable,
            method: "GET"
        );
    }

    /**
     * Get the routes defined in the group.
     *
     * @return array
     */
    public function getRoutes(): array
    {
        return $this->routes;
    }
}
